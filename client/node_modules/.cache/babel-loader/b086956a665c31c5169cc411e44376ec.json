{"ast":null,"code":"import _regeneratorRuntime from\"/home/mohamad/Downloads/the_odin_project/code/MERN-stack-authentication/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/mohamad/Downloads/the_odin_project/code/MERN-stack-authentication/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/mohamad/Downloads/the_odin_project/code/MERN-stack-authentication/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./ResetPasswordScreen.css';import{useState}from'react';import{Link}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ResetPasswordScreen=function ResetPasswordScreen(_ref){var match=_ref.match;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),password=_useState2[0],setPassword=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),confirmpassword=_useState4[0],setConfirmpassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),success=_useState8[0],setSuccess=_useState8[1];var resetPasswordHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var config,_yield$axios$put,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();config={header:{\"Content-Type\":\"application/json\"}};if(!(password!==confirmpassword)){_context.next=7;break;}setPassword(\"\");setConfirmpassword(\"\");setTimeout(function(){setError(\"\");},5000);return _context.abrupt(\"return\",setError(\"Passwords don't match\"));case 7:_context.prev=7;_context.next=10;return axios.put(\"/api/auth/resetpassword/\".concat(match.params.resetToken),{password:password},config);case 10:_yield$axios$put=_context.sent;data=_yield$axios$put.data;setSuccess(data.data);_context.next=19;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](7);setError(_context.t0.response.data.error);setTimeout(function(){setError(\"\");},5000);case 19:case\"end\":return _context.stop();}}},_callee,null,[[7,15]]);}));return function resetPasswordHandler(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"resetpassword-screen\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:resetPasswordHandler,className:\"resetpassword-screen_form\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"resetpassword-screen_title\",children:\"Reset Password\"}),error&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:error}),success&&/*#__PURE__*/_jsxs(\"span\",{className:\"success-message\",children:[success,/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",required:true,id:\"password\",placeholder:\"Enter new password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmpassword\",children:\"Confirm New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",required:true,id:\"confirmpassword\",placeholder:\"Confirm new password\",value:confirmpassword,onChange:function onChange(e){return setConfirmpassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Reset Password\"})]})});};export default ResetPasswordScreen;","map":{"version":3,"sources":["/home/mohamad/Downloads/the_odin_project/code/MERN-stack-authentication/client/src/components/screens/ResetPasswordScreen.js"],"names":["useState","Link","axios","ResetPasswordScreen","match","password","setPassword","confirmpassword","setConfirmpassword","error","setError","success","setSuccess","resetPasswordHandler","e","preventDefault","config","header","setTimeout","put","params","resetToken","data","response","target","value"],"mappings":"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","sourcesContent":["import './ResetPasswordScreen.css'\nimport{useState} from 'react'\nimport{Link} from \"react-router-dom\"\nimport axios from \"axios\"\n\nconst ResetPasswordScreen = ({match}) => {\n  const [password,setPassword]=useState(\"\")\n  const [confirmpassword,setConfirmpassword]=useState(\"\")\n  const[error,setError]=useState(\"\")\n  const[success,setSuccess]=useState(\"\");\n\n  const resetPasswordHandler = async (e)=>{\n  e.preventDefault()\n\n  const config ={\n    header:{\n      \"Content-Type\":\"application/json\",\n    },\n  }\n\n  if(password!==confirmpassword){\n    setPassword(\"\")\n    setConfirmpassword(\"\")\n    setTimeout(()=>{\n      setError(\"\")\n    },5000)\n    return setError(\"Passwords don't match\")\n  }\n  try{\n    const {data} = await axios.put(`/api/auth/resetpassword/${match.params.resetToken}`,{password,},config)\n\n    setSuccess(data.data)\n  }catch(error){\n    setError(error.response.data.error)\n    setTimeout(()=>{\n      setError(\"\")\n    },5000)\n  }\n\n  }\n\n  return (\n    <div className=\"resetpassword-screen\">\n      <form onSubmit={resetPasswordHandler} className=\"resetpassword-screen_form\">\n        <h3 className=\"resetpassword-screen_title\">Reset Password</h3>\n        {error &&<span className=\"error-message\">{error}</span>}\n        {success && <span className=\"success-message\">{success}<Link to=\"/login\">Login</Link></span>}\n        <div className=\"form-group\">\n          <label htmlFor=\"password\">New Password</label>\n          <input type=\"password\" required id=\"password\" placeholder=\"Enter new password\" value={password} onChange={(e)=>setPassword(e.target.value)}/>\n        </div>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"confirmpassword\">Confirm New Password</label>\n          <input type=\"password\" required id=\"confirmpassword\" placeholder=\"Confirm new password\" value={confirmpassword} onChange={(e)=>setConfirmpassword(e.target.value)}/>\n        </div>\n\n        <button type=\"submit\" className=\"btn btn-primary\">Reset Password</button>\n      </form>\n    </div>\n  )\n}\n\nexport default ResetPasswordScreen\n"]},"metadata":{},"sourceType":"module"}