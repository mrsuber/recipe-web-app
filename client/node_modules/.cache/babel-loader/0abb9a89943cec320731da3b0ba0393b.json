{"ast":null,"code":"import _regeneratorRuntime from\"/home/mohamad/Downloads/the_odin_project/code/MERN-stack-authentication/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/mohamad/Downloads/the_odin_project/code/MERN-stack-authentication/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/mohamad/Downloads/the_odin_project/code/MERN-stack-authentication/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./RegisterScreen.css';import{useState,useEffect}from'react';import axios from'axios';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RegisterScreen=function RegisterScreen(_ref){var history=_ref.history;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),confirmpassword=_useState8[0],setConfirmpassword=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];useEffect(function(){if(localStorage.getItem(\"authToken\")){history.push(\"/\");}},[history]);var registerHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var config,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();config={header:{\"Content-Type\":\"application/json\"}};if(!(password!==confirmpassword)){_context.next=7;break;}setPassword(\"\");setConfirmpassword(\"\");setTimeout(function(){setError(\"\");},5000);return _context.abrupt(\"return\",setError(\"Password do not match\"));case 7:_context.prev=7;_context.next=10;return axios.post(\"/api/auth/register\",{username:username,email:email,password:password},config);case 10:_yield$axios$post=_context.sent;data=_yield$axios$post.data;localStorage.setItem(\"authToken\",data.token);history.push(\"/\");_context.next=20;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](7);setError(_context.t0.response.data.error);setTimeout(function(){setError(\"\");},5000);case 20:case\"end\":return _context.stop();}}},_callee,null,[[7,16]]);}));return function registerHandler(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"register-screen\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:registerHandler,className:\"register-screen_form\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"register-screen_title\",children:\"Register\"}),error&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,id:\"name\",placeholder:\"Enter Username\",value:username,onChange:function onChange(e){return setUsername(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",required:true,id:\"email\",placeholder:\"Enter email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",required:true,id:\"password\",placeholder:\"Enter Password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmpassword\",children:\"Confirm Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",required:true,id:\"confirmpassword\",placeholder:\"Confirm Password\",value:confirmpassword,onChange:function onChange(e){return setConfirmpassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Register\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"register-screen_subtext\",children:[\"Already have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login\"})]})]})});};export default RegisterScreen;","map":{"version":3,"sources":["/home/mohamad/Downloads/the_odin_project/code/MERN-stack-authentication/client/src/components/screens/RegisterScreen.js"],"names":["useState","useEffect","axios","Link","RegisterScreen","history","username","setUsername","email","setEmail","password","setPassword","confirmpassword","setConfirmpassword","error","setError","localStorage","getItem","push","registerHandler","e","preventDefault","config","header","setTimeout","post","data","setItem","token","response","target","value"],"mappings":"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","sourcesContent":["import './RegisterScreen.css'\nimport {useState,useEffect} from 'react'\nimport axios from 'axios'\nimport {Link} from 'react-router-dom'\n\nconst RegisterScreen = ({history}) => {\n  const [username,setUsername]=useState('')\n  const [email,setEmail]=useState('')\n  const [password,setPassword]=useState('')\n  const [confirmpassword,setConfirmpassword]=useState('')\n  const [error,setError]=useState('')\n\n  useEffect(()=>{\n    if(localStorage.getItem(\"authToken\")){\n      history.push(\"/\")\n    }\n  },[history])\n\n  const registerHandler= async (e)=>{\n    e.preventDefault()\n    const config = {\n      header:{\n        \"Content-Type\":\"application/json\"\n      }\n    }\n    if(password!==confirmpassword){\n      setPassword(\"\")\n      setConfirmpassword(\"\")\n      setTimeout(()=>{\n        setError(\"\")\n      },5000)\n      return setError(\"Password do not match\")\n    }\n\n    try{\n       const {data}= await axios.post(\"/api/auth/register\",{username,email,password},config);\n       localStorage.setItem(\"authToken\",data.token)\n       history.push(\"/\")\n    }catch(error){\n      setError(error.response.data.error)\n        setTimeout(()=>{\n          setError(\"\")\n        },5000)\n    }\n  }\n  return (\n    <div className=\"register-screen\">\n\n    <form onSubmit={registerHandler} className=\"register-screen_form\">\n      <h3 className=\"register-screen_title\">Register</h3>\n      {error && <span className=\"error-message\">{error}</span>}\n      <div className=\"form-group\">\n        <label htmlFor=\"name\">Username:</label>\n        <input type=\"text\" required id=\"name\" placeholder=\"Enter Username\" value={username} onChange={(e) =>setUsername(e.target.value)}/>\n      </div>\n\n      <div className=\"form-group\">\n        <label htmlFor=\"email\">Email:</label>\n        <input type=\"email\" required id=\"email\" placeholder=\"Enter email\" value={email} onChange={(e) =>setEmail(e.target.value)}/>\n      </div>\n\n      <div className=\"form-group\">\n        <label htmlFor=\"password\">Password:</label>\n        <input type=\"password\" required id=\"password\" placeholder=\"Enter Password\" value={password} onChange={(e) =>setPassword(e.target.value)}/>\n      </div>\n\n      <div className=\"form-group\">\n        <label htmlFor=\"confirmpassword\">Confirm Password:</label>\n        <input type=\"password\" required id=\"confirmpassword\" placeholder=\"Confirm Password\" value={confirmpassword} onChange={(e) =>setConfirmpassword(e.target.value)}/>\n      </div>\n      <button type=\"submit\" className=\"btn btn-primary\">Register</button>\n\n      <span className=\"register-screen_subtext\">Already have an account? <Link to=\"/login\">Login</Link></span>\n    </form>\n\n\n\n    </div>\n  )\n}\n\nexport default RegisterScreen\n"]},"metadata":{},"sourceType":"module"}