{"ast":null,"code":"var _jsxFileName = \"/home/mohamad/Downloads/the_odin_project/code/MERN-stack-authentication/client/src/components/screens/PrivateScreen.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst PrivateScreen = ({\n  history\n}) => {\n  _s();\n\n  const [error, setError] = useState(\"\");\n  const [privateData, setPrivateData] = useState(\"\");\n  useEffect(() => {\n    if (!localStorage.getItem(\"authToken\")) {\n      history.push(\"/login\");\n    }\n\n    const fetchPrivateData = async () => {\n      const config = {\n        header: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${localStorage.getItem(\"authToken\")}`\n        }\n      };\n\n      try {\n        const {\n          data\n        } = axios.get(\"/api/private\", config);\n        setPrivateData(data.data);\n      } catch (error) {\n        console.log(error);\n        localStorage.removeItem(\"authToken\");\n        setError(\"You are not authorized please login\");\n      }\n    };\n\n    fetchPrivateData();\n  }, [history]);\n\n  const logoutHandler = () => {\n    localStorage.removeItem(\"authToken\");\n    history.push(\"/login\");\n  };\n\n  return error ? /*#__PURE__*/_jsxDEV(\"span\", {\n    className: \"error-message\",\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 12\n  }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: \"green\",\n        color: \"white\"\n      },\n      children: \"PrivateData:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: logoutHandler,\n      children: \"Logout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(PrivateScreen, \"+wvMUd4tYOIdlCBRjFRpdB5cyeo=\");\n\n_c = PrivateScreen;\nexport default PrivateScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"PrivateScreen\");","map":{"version":3,"sources":["/home/mohamad/Downloads/the_odin_project/code/MERN-stack-authentication/client/src/components/screens/PrivateScreen.js"],"names":["useState","useEffect","axios","PrivateScreen","history","error","setError","privateData","setPrivateData","localStorage","getItem","push","fetchPrivateData","config","header","data","get","console","log","removeItem","logoutHandler","background","color"],"mappings":";;;AAAA,SAAQA,QAAR,EAAiBC,SAAjB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;;AAEA,MAAMC,aAAa,GAAG,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAe;AAAA;;AACnC,QAAM,CAACC,KAAD,EAAOC,QAAP,IAAkBN,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACO,WAAD,EAAaC,cAAb,IAA6BR,QAAQ,CAAC,EAAD,CAA3C;AAEAC,EAAAA,SAAS,CAAC,MAAI;AACZ,QAAG,CAACQ,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAJ,EAAsC;AACpCN,MAAAA,OAAO,CAACO,IAAR,CAAa,QAAb;AACD;;AACD,UAAMC,gBAAgB,GAAG,YAAW;AAClC,YAAMC,MAAM,GAAG;AACbC,QAAAA,MAAM,EAAC;AACL,0BAAe,kBADV;AAEL,2BAAiB,UAASL,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAkC;AAFvD;AADM,OAAf;;AAMA,UAAG;AACD,cAAM;AAACK,UAAAA;AAAD,YAASb,KAAK,CAACc,GAAN,CAAU,cAAV,EAAyBH,MAAzB,CAAf;AAEAL,QAAAA,cAAc,CAACO,IAAI,CAACA,IAAN,CAAd;AAED,OALD,CAKC,OAAMV,KAAN,EAAY;AACXY,QAAAA,OAAO,CAACC,GAAR,CAAYb,KAAZ;AACAI,QAAAA,YAAY,CAACU,UAAb,CAAwB,WAAxB;AACAb,QAAAA,QAAQ,CAAC,qCAAD,CAAR;AACD;AACF,KAjBD;;AAmBAM,IAAAA,gBAAgB;AACjB,GAxBQ,EAwBP,CAACR,OAAD,CAxBO,CAAT;;AA0BA,QAAMgB,aAAa,GAAC,MAAI;AACtBX,IAAAA,YAAY,CAACU,UAAb,CAAwB,WAAxB;AACAf,IAAAA,OAAO,CAACO,IAAR,CAAa,QAAb;AACD,GAHD;;AAIA,SACEN,KAAK,gBAAE;AAAM,IAAA,SAAS,EAAC,eAAhB;AAAA,cAAiCA;AAAjC;AAAA;AAAA;AAAA;AAAA,UAAF,gBAEL;AAAA,4BACE;AAAK,MAAA,KAAK,EAAE;AAACgB,QAAAA,UAAU,EAAC,OAAZ;AAAqBC,QAAAA,KAAK,EAAC;AAA3B,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAQ,MAAA,OAAO,EAAEF,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA,kBAHF;AASD,CA3CD;;GAAMjB,a;;KAAAA,a;AA6CN,eAAeA,aAAf","sourcesContent":["import {useState,useEffect} from 'react'\nimport axios from 'axios'\n\nconst PrivateScreen = ({history}) => {\n  const [error,setError] =useState(\"\")\n  const [privateData,setPrivateData]=useState(\"\");\n\n  useEffect(()=>{\n    if(!localStorage.getItem(\"authToken\")){\n      history.push(\"/login\")\n    }\n    const fetchPrivateData = async () =>{\n      const config = {\n        header:{\n          \"Content-Type\":\"application/json\",\n          \"Authorization\":`Bearer ${localStorage.getItem(\"authToken\")}`\n        }\n      }\n      try{\n        const {data} = axios.get(\"/api/private\",config)\n\n        setPrivateData(data.data)\n\n      }catch(error){\n        console.log(error)\n        localStorage.removeItem(\"authToken\")\n        setError(\"You are not authorized please login\")\n      }\n    }\n\n    fetchPrivateData()\n  },[history])\n\n  const logoutHandler=()=>{\n    localStorage.removeItem(\"authToken\")\n    history.push(\"/login\")\n  }\n  return (\n    error? <span className=\"error-message\">{error}</span>\n    :\n    <>\n      <div style={{background:\"green\", color:\"white\"}}>PrivateData:{}</div>\n      <button onClick={logoutHandler}>Logout</button>\n    </>\n\n  )\n}\n\nexport default PrivateScreen\n"]},"metadata":{},"sourceType":"module"}