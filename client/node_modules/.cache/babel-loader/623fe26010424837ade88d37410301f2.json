{"ast":null,"code":"import _regeneratorRuntime from\"/home/mohamad/Downloads/the_odin_project/code/MERN-stack-authentication/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/mohamad/Downloads/the_odin_project/code/MERN-stack-authentication/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/mohamad/Downloads/the_odin_project/code/MERN-stack-authentication/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./LoginScreen.css';import{useState,useEffect}from'react';import axios from'axios';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginScreen=function LoginScreen(_ref){var history=_ref.history;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];useEffect(function(){if(localStorage.getItem(\"authToken\")){history.push(\"/\");}},[history]);var loginHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var config,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();config={header:{\"Content-Type\":\"application/json\"}};_context.prev=2;_context.next=5;return axios.post(\"/api/auth/login\",{email:email,password:password},config);case 5:_yield$axios$post=_context.sent;data=_yield$axios$post.data;localStorage.setItem(\"authToken\",data.token);history.push(\"/\");_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);setError(_context.t0.response.data.error);setTimeout(function(){setError(\"\");},5000);case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,11]]);}));return function loginHandler(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"login-screen\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:loginHandler,className:\"login-screen_form\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"login-screen_title\",children:\"Login\"}),error&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",required:true,id:\"email\",placeholder:\"Enter email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},tabIndex:1})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"password\",children:[\"Password:\",/*#__PURE__*/_jsx(Link,{to:\"/forgotpassword\",className:\"login-screen_forgotpassword\",tapIndex:4,children:\"Forgot Password?\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",required:true,id:\"password\",placeholder:\"Enter Password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},tabIndex:2})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",tabIndex:3,children:\"Login\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"login-screen_subtext\",children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Register\"})]})]})});};export default LoginScreen;","map":{"version":3,"sources":["/home/mohamad/Downloads/the_odin_project/code/MERN-stack-authentication/client/src/components/screens/LoginScreen.js"],"names":["useState","useEffect","axios","Link","LoginScreen","history","email","setEmail","password","setPassword","error","setError","localStorage","getItem","push","loginHandler","e","preventDefault","config","header","post","data","setItem","token","response","setTimeout","target","value"],"mappings":"geAAA,MAAO,mBAAP,CACA,OAAQA,QAAR,CAAiBC,SAAjB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,IAAR,KAAmB,kBAAnB,C,wFAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,MAAe,IAAbC,CAAAA,OAAa,MAAbA,OAAa,CAEjC,cAAuBL,QAAQ,CAAC,EAAD,CAA/B,wCAAOM,KAAP,eAAaC,QAAb,eACA,eAA6BP,QAAQ,CAAC,EAAD,CAArC,yCAAOQ,QAAP,eAAgBC,WAAhB,eACA,eAAuBT,QAAQ,CAAC,EAAD,CAA/B,yCAAOU,KAAP,eAAaC,QAAb,eAEAV,SAAS,CAAC,UAAI,CACZ,GAAGW,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAH,CAAqC,CACnCR,OAAO,CAACS,IAAR,CAAa,GAAb,EACD,CACF,CAJQ,CAIP,CAACT,OAAD,CAJO,CAAT,CAOA,GAAMU,CAAAA,YAAY,2FAAE,iBAAOC,CAAP,oJAClBA,CAAC,CAACC,cAAF,GACMC,MAFY,CAEH,CACbC,MAAM,CAAC,CACL,eAAe,kBADV,CADM,CAFG,uCAUKjB,CAAAA,KAAK,CAACkB,IAAN,CAAW,iBAAX,CAA6B,CAACd,KAAK,CAALA,KAAD,CAAOE,QAAQ,CAARA,QAAP,CAA7B,CAA8CU,MAA9C,CAVL,wCAURG,IAVQ,mBAURA,IAVQ,CAWfT,YAAY,CAACU,OAAb,CAAqB,WAArB,CAAiCD,IAAI,CAACE,KAAtC,EACAlB,OAAO,CAACS,IAAR,CAAa,GAAb,EAZe,iFAchBH,QAAQ,CAAC,YAAMa,QAAN,CAAeH,IAAf,CAAoBX,KAArB,CAAR,CACEe,UAAU,CAAC,UAAI,CACbd,QAAQ,CAAC,EAAD,CAAR,CACD,CAFS,CAER,IAFQ,CAAV,CAfc,qEAAF,kBAAZI,CAAAA,YAAY,6CAAlB,CAoBA,mBACE,YAAK,SAAS,CAAC,cAAf,uBAEA,cAAM,QAAQ,CAAEA,YAAhB,CAA8B,SAAS,CAAC,mBAAxC,wBACE,WAAI,SAAS,CAAC,oBAAd,mBADF,CAEGL,KAAK,eAAI,aAAM,SAAS,CAAC,eAAhB,UAAiCA,KAAjC,EAFZ,cAKE,aAAK,SAAS,CAAC,YAAf,wBACE,cAAO,OAAO,CAAC,OAAf,oBADF,cAEE,cAAO,IAAI,CAAC,OAAZ,CAAoB,QAAQ,KAA5B,CAA6B,EAAE,CAAC,OAAhC,CAAwC,WAAW,CAAC,aAApD,CAAkE,KAAK,CAAEJ,KAAzE,CAAgF,QAAQ,CAAE,kBAACU,CAAD,QAAMT,CAAAA,QAAQ,CAACS,CAAC,CAACU,MAAF,CAASC,KAAV,CAAd,EAA1F,CAA0H,QAAQ,CAAE,CAApI,EAFF,GALF,cAUE,aAAK,SAAS,CAAC,YAAf,wBACE,eAAO,OAAO,CAAC,UAAf,oCAAmC,KAAC,IAAD,EAAM,EAAE,CAAC,iBAAT,CAA2B,SAAS,CAAC,6BAArC,CAAmE,QAAQ,CAAE,CAA7E,8BAAnC,GADF,cAEE,cAAO,IAAI,CAAC,UAAZ,CAAuB,QAAQ,KAA/B,CAAgC,EAAE,CAAC,UAAnC,CAA8C,WAAW,CAAC,gBAA1D,CAA2E,KAAK,CAAEnB,QAAlF,CAA4F,QAAQ,CAAE,kBAACQ,CAAD,QAAMP,CAAAA,WAAW,CAACO,CAAC,CAACU,MAAF,CAASC,KAAV,CAAjB,EAAtG,CAAyI,QAAQ,CAAE,CAAnJ,EAFF,GAVF,cAgBE,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,iBAAhC,CAAkD,QAAQ,CAAE,CAA5D,mBAhBF,cAkBE,cAAM,SAAS,CAAC,sBAAhB,kDAA8D,KAAC,IAAD,EAAM,EAAE,CAAC,WAAT,sBAA9D,GAlBF,GAFA,EADF,CA4BD,CA7DD,CA+DA,cAAevB,CAAAA,WAAf","sourcesContent":["import './LoginScreen.css'\nimport {useState,useEffect} from 'react'\nimport axios from 'axios'\nimport {Link} from 'react-router-dom'\n\nconst LoginScreen = ({history}) => {\n\n  const [email,setEmail]=useState('')\n  const [password,setPassword]=useState('')\n  const [error,setError]=useState('')\n\n  useEffect(()=>{\n    if(localStorage.getItem(\"authToken\")){\n      history.push(\"/\")\n    }\n  },[history])\n\n\n  const loginHandler= async (e)=>{\n    e.preventDefault()\n    const config = {\n      header:{\n        \"Content-Type\":\"application/json\"\n      }\n    }\n\n\n    try{\n       const {data}= await axios.post(\"/api/auth/login\",{email,password},config);\n       localStorage.setItem(\"authToken\",data.token)\n       history.push(\"/\")\n    }catch(error){\n      setError(error.response.data.error)\n        setTimeout(()=>{\n          setError(\"\")\n        },5000)\n    }\n  }\n  return (\n    <div className=\"login-screen\">\n\n    <form onSubmit={loginHandler} className=\"login-screen_form\">\n      <h3 className=\"login-screen_title\">Login</h3>\n      {error && <span className=\"error-message\">{error}</span>}\n\n\n      <div className=\"form-group\">\n        <label htmlFor=\"email\">Email:</label>\n        <input type=\"email\" required id=\"email\" placeholder=\"Enter email\" value={email} onChange={(e) =>setEmail(e.target.value)} tabIndex={1}/>\n      </div>\n\n      <div className=\"form-group\">\n        <label htmlFor=\"password\">Password:<Link to=\"/forgotpassword\" className=\"login-screen_forgotpassword\" tapIndex={4}>Forgot Password?</Link></label>\n        <input type=\"password\" required id=\"password\" placeholder=\"Enter Password\" value={password} onChange={(e) =>setPassword(e.target.value)} tabIndex={2}/>\n      </div>\n\n\n      <button type=\"submit\" className=\"btn btn-primary\" tabIndex={3}>Login</button>\n\n      <span className=\"login-screen_subtext\">Don't have an account? <Link to=\"/register\">Register</Link></span>\n    </form>\n\n\n\n    </div>\n  )\n}\n\nexport default LoginScreen\n"]},"metadata":{},"sourceType":"module"}