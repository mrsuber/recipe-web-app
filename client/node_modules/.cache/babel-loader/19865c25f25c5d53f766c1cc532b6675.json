{"ast":null,"code":"import _regeneratorRuntime from\"/home/mohamad/Downloads/the_odin_project/code/MERN-stack-authentication/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/mohamad/Downloads/the_odin_project/code/MERN-stack-authentication/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/mohamad/Downloads/the_odin_project/code/MERN-stack-authentication/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PrivateScreen=function PrivateScreen(_ref){var history=_ref.history;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),privateData=_useState4[0],setPrivateData=_useState4[1];useEffect(function(){if(!localStorage.getItem(\"authToken\")){history.push(\"/login\");}var fetchPrivateData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var config,_yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:config={headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(localStorage.getItem(\"authToken\"))}};_context.prev=1;_context.next=4;return axios.get(\"/api/private\",config);case 4:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setPrivateData(data.data);_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);localStorage.removeItem(\"authToken\");setError(\"You are not authorized please login\");case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function fetchPrivateData(){return _ref2.apply(this,arguments);};}();fetchPrivateData();},[history]);var logoutHandler=function logoutHandler(){localStorage.removeItem(\"authToken\");history.push(\"/login\");};return error?/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:\"green\",color:\"white\"},children:[\"PrivateData:\",privateData]}),/*#__PURE__*/_jsx(\"button\",{onClick:logoutHandler,children:\"Logout\"})]});};export default PrivateScreen;","map":{"version":3,"sources":["/home/mohamad/Downloads/the_odin_project/code/MERN-stack-authentication/client/src/components/screens/PrivateScreen.js"],"names":["useState","useEffect","axios","PrivateScreen","history","error","setError","privateData","setPrivateData","localStorage","getItem","push","fetchPrivateData","config","headers","Authorization","get","data","removeItem","logoutHandler","background","color"],"mappings":"geAAA,OAAQA,QAAR,CAAiBC,SAAjB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,6IAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,MAAe,IAAbC,CAAAA,OAAa,MAAbA,OAAa,CACnC,cAAwBJ,QAAQ,CAAC,EAAD,CAAhC,wCAAOK,KAAP,eAAaC,QAAb,eACA,eAAmCN,QAAQ,CAAC,EAAD,CAA3C,yCAAOO,WAAP,eAAmBC,cAAnB,eAEAP,SAAS,CAAC,UAAI,CACZ,GAAG,CAACQ,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAJ,CAAsC,CACpCN,OAAO,CAACO,IAAR,CAAa,QAAb,EACD,CACD,GAAMC,CAAAA,gBAAgB,2FAAG,oKACjBC,MADiB,CACR,CACbC,OAAO,CAAC,CACN,eAAe,kBADT,CAENC,aAAa,kBAAWN,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAX,CAFP,CADK,CADQ,uCAQAR,CAAAA,KAAK,CAACc,GAAN,CAAU,cAAV,CAAyBH,MAAzB,CARA,uCAQdI,IARc,kBAQdA,IARc,CAUrBT,cAAc,CAACS,IAAI,CAACA,IAAN,CAAd,CAVqB,+EAcrBR,YAAY,CAACS,UAAb,CAAwB,WAAxB,EACAZ,QAAQ,CAAC,qCAAD,CAAR,CAfqB,oEAAH,kBAAhBM,CAAAA,gBAAgB,2CAAtB,CAmBAA,gBAAgB,GACjB,CAxBQ,CAwBP,CAACR,OAAD,CAxBO,CAAT,CA0BA,GAAMe,CAAAA,aAAa,CAAC,QAAdA,CAAAA,aAAc,EAAI,CACtBV,YAAY,CAACS,UAAb,CAAwB,WAAxB,EACAd,OAAO,CAACO,IAAR,CAAa,QAAb,EACD,CAHD,CAIA,MACEN,CAAAA,KAAK,cAAE,aAAM,SAAS,CAAC,eAAhB,UAAiCA,KAAjC,EAAF,cAEL,wCACE,aAAK,KAAK,CAAE,CAACe,UAAU,CAAC,OAAZ,CAAqBC,KAAK,CAAC,OAA3B,CAAZ,0BAA8Dd,WAA9D,GADF,cAEE,eAAQ,OAAO,CAAEY,aAAjB,oBAFF,GAHF,CASD,CA3CD,CA6CA,cAAehB,CAAAA,aAAf","sourcesContent":["import {useState,useEffect} from 'react'\nimport axios from 'axios'\n\nconst PrivateScreen = ({history}) => {\n  const [error,setError] =useState(\"\")\n  const [privateData,setPrivateData]=useState(\"\");\n\n  useEffect(()=>{\n    if(!localStorage.getItem(\"authToken\")){\n      history.push(\"/login\")\n    }\n    const fetchPrivateData = async () =>{\n      const config = {\n        headers:{\n          \"Content-Type\":\"application/json\",\n          Authorization:`Bearer ${localStorage.getItem(\"authToken\")}`\n        }\n      }\n      try{\n        const {data} = await axios.get(\"/api/private\",config)\n\n        setPrivateData(data.data)\n\n      }catch(error){\n\n        localStorage.removeItem(\"authToken\")\n        setError(\"You are not authorized please login\")\n      }\n    }\n\n    fetchPrivateData()\n  },[history])\n\n  const logoutHandler=()=>{\n    localStorage.removeItem(\"authToken\")\n    history.push(\"/login\")\n  }\n  return (\n    error? <span className=\"error-message\">{error}</span>\n    :\n    <>\n      <div style={{background:\"green\", color:\"white\"}}>PrivateData:{privateData}</div>\n      <button onClick={logoutHandler}>Logout</button>\n    </>\n\n  )\n}\n\nexport default PrivateScreen\n"]},"metadata":{},"sourceType":"module"}